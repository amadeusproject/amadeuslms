{% extends 'home_professor.html' %}

{% load static i18n permission_tags %}
{% load django_bootstrap_breadcrumbs %}

{% block breadcrumbs %}

  {{ block.super }}
  {% breadcrumb 'Courses' 'course:manage' %}

{% endblock %}

{% block sidebar %}
    <div class="panel panel-primary navigation">
        <div class="panel-heading">
            <h4>Menu</h4>
        </div>
        <div class="panel-body">
            <ul class="nav nav-pills nav-stacked">
                <li><a href="{% url 'app:index' %}">{% trans 'Home' %}</a></li>
                <li><a href="{% url 'users:profile' %}">{% trans 'Profile' %}</a></li>
                {% if user|has_role:'student' or not user.is_staff %}
                    <li><a href="{% url 'course:manage' %}">{% trans 'My courses' %}</a></li>
                    <li><a href="{% url 'core:guest' %}">{% trans 'All Courses' %}</a></li>
                {% endif %}
                {% if user|has_role:'system_admin' %}
                    <li> <a href="{% url 'users:manage' %}">{% trans 'Manage Users' %}</a></li>
                {% endif %}
                {% if user|has_role:'system_admin' or user|has_role:'professor' %}
                    <li>
                        <a href="#courses_list" class="accordion" data-toggle="collapse">{% trans 'Manage Courses' %}</a>
                        <div id="courses_list" class="collapse">
                            <ul class="nav nav-pill nav-stacked accordion_list">
                            {% for course in courses_list %}
                                <li><a href="{% url 'course:view' course.slug %}">{{ course }}</a></li>
                            {% endfor %}
                            </ul>
                        </div>
                    </li>
                {% endif %}
            </ul>
        </div>
    </div>

    	{% if user|has_role:'professor' or user|has_role:'system_admin' %}

		<div class="panel panel-primary navigation">
		    <div class="panel-heading">
		        <h3 class="panel-title">Category</h3>
		    </div>
		    <div class="panel-body">
		        <ul class="nav nav-pills nav-stacked">
		            <li><a href="{% url 'course:create_cat' %}">Create Category</a></li>
		            <li><a href="{% url 'course:manage_cat' %}">List Category</a></li>
		        </ul>
		    </div>
		</div>
	{% endif %}
{% endblock %}

{% block content %}
	{% if messages %}
		{% for message in messages %}
			<div class="alert alert-success alert-dismissible" role="alert">
				<button type="button" class="close" data-dismiss="alert" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
				<p>{{ message }}</p>
			</div>
		{% endfor %}
	{% endif %}

<div class="col-md-12">
	<form id="searchform" action="{% url 'course:manage' %}" method="get" accept-charset="utf-8">
		<div class="input-group">
		  <div class="form-group is-empty">
		  <input type="search" class="form-control" placeholder="Search Courses" name="q" id="searchbox"></div>
		    <span class="input-group-btn input-group-sm">
		      <button type="button" class="btn btn-fab btn-fab-mini">
		        <i class="material-icons">search</i>
		      </button>
		    </span>
		</div>
	</form>
</div>
	

</fieldset>
	<div class="col-md-12">
		{% if courses|length > 0 %}
			{% if request.GET.category == 'all' or none or request.GET.category == '' %}
				{% for course in list_courses %}
		          <div class="panel-group ui-accordion ui-widget ui-helper-reset ui-sortable" id="accordion" role="tablist" aria-multiselectable="false">
		            <div class="group">
						<div class="panel panel-info">
						    <div class="panel-heading" role="tab">
						      <div class="row">
						        <div class="col-xs-9 col-md-10 titleTopic">
						          <a role="button" data-toggle="collapse" data-parent="#accordion" href=".collapseOne" aria-expanded="false" aria-controls="collapseOne" class="collapsed">
						          <h4 style="color:white">{{course.name}}</h4>
						          </a>
						        </div>
						        {% if user|has_role:'professor' or user|has_role:'system_admin' %}
							        <div class="col-xs-4 col-md-2" id="divMoreActions">
							            <div class="btn-group">
							              <button class="btn btn-default btn-sm dropdown-toggle" type="button" id="moreActions" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							                <i class="fa fa-ellipsis-v fa-2x" aria-hidden="true"></i>
							              </button>
							              <ul class="dropdown-menu" aria-labelledby="moreActions">
							                <li><a href="" data-toggle="modal" data-target="#myModal4"><i class="fa fa-files-o fa-fw" aria-hidden="true"></i>&nbsp; Replicate</a></li>
							                <li><a href="javascript:void(0)" data-toggle="modal" data-target="#removeCourse"><i class="fa fa-trash fa-fw" aria-hidden="true"></i>&nbsp; Remove</a></li>
							              </ul>
							            </div>
							        </div>
						        {% endif %}
						      </div>
						    </div>
						    <div class="panel-collapse collapseOne collapse in" role="tabpanel" aria-labelledby="headingOne" aria-expanded="true" aria-hidden="false" tabindex="0">
						      <div class="panel-body">
						        <p><b>Course Name: </b>{{course.name}}</p>
						        <p><b>Duration (in semesters): </b>09</p>
						        <p><b>Coordinator: </b>{{course.professors}}</p>
						        <p>
						          <b>Description:</b>
						          <i>
						            {{course.description}}
						          </i>
						        </p>
								<a href="{% url 'course:view' course.slug %}" class="btn btn-raised btn-default center-block">{% trans 'View Course' %}<div class="ripple-container"></div></a>
						      </div>
						    </div>
						</div>
					</div>
				</div>
				{% endfor %}
			{% else %}
				{% for course in courses_category %}
    				{% if course.category.name == request.GET.category %}
    					<!-- Put your content here! -->
		          <div class="panel-group ui-accordion ui-widget ui-helper-reset ui-sortable" id="accordion" role="tablist" aria-multiselectable="false">
		            <div class="group">
						<div class="panel panel-info">
						    <div class="panel-heading" role="tab">
						      <div class="row">
						        <div class="col-xs-9 col-md-9 titleTopic">
						          <a role="button" data-toggle="collapse" data-parent="#accordion" href=".collapseOne" aria-expanded="false" aria-controls="collapseOne" class="collapsed">
						          <h4 style="color:white">{{course.name}}</h4>
						          </a>
						        </div>
						        {% if user|has_role:'professor' or user|has_role:'system_admin' %}
							        <div class="col-xs-4 col-md-3" id="divMoreActions">
							            <div class="btn-group">
							              <button class="btn btn-default btn-sm dropdown-toggle" type="button" id="moreActions" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							                <i class="fa fa-ellipsis-v fa-2x" aria-hidden="true"></i>
							              </button>
							              <ul class="dropdown-menu" aria-labelledby="moreActions">
							                <li><a href="javascript:void(0)" data-toggle="modal" data-target="#myModal4"><i class="fa fa-files-o fa-fw" aria-hidden="true"></i>&nbsp; Replicate</a></li>
							                <li><a href="javascript:void(0)" data-toggle="modal" data-target="#removeCourse"><i class="fa fa-trash fa-fw" aria-hidden="true"></i>&nbsp; Remove</a></li>
							              </ul>
							            </div>
							        </div>
						        {% endif %}
						      </div>
						    </div>
						    <div class="panel-collapse collapseOne collapse in" role="tabpanel" aria-labelledby="headingOne" aria-expanded="true" aria-hidden="false" tabindex="0">
						      <div class="panel-body">
						        <p><b>Course Name: </b>{{course.name}}</p>
						        <p><b>Duration (in semesters): </b>09</p>
						        <p><b>Coordinator: </b>{{course.professors}}</p>
						        <p>
						          <b>Description:</b>
						          <i>
						            {{course.description}}
						          </i>
						        </p>
								<a href="{% url 'course:view' course.slug %}" class="btn btn-raised btn-default center-block">{% trans 'View Course' %}<div class="ripple-container"></div></a>
						      </div>
						    </div>
						</div>
					</div>
				</div>
    				{% endif %}
				{% endfor %}
			{% endif %}
		{% else %}
			{% trans 'No courses found' %}
		{% endif %}
		<div class="group">
			<div class="modal" id="removeCourse">
				  <div class="modal-dialog">
				    <div class="modal-content">
				      <div class="modal-header">
				        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
				        <h4 class="modal-title"></h4>
				      </div>
				      <div class="modal-body">
				        <p>Delete your course?</p>
				      </div>
				      <div class="modal-footer">

				        <a href="http://127.0.0.1:8080/html/screens/users/profile_user.html" target="_self"><button type="button" class="btn btn-primary">Confirm</button></a>

				      </div>
				    </div>
				  </div>
			</div>
		</div>
	</div>
	<div class="col-md-12">
		<nav aria-label="Page navigation">
			<ul class="pagination">
				{% if page_obj.has_previous %}
				    <li>
				        <a href="?page={{ page_obj.previous_page_number }}"><span><<</span></a>
				    </li>
				{% endif %}
			    {% for page_number in paginator.page_range %}
					<li{% if page_obj.number == page_number %} class="active"{% endif %}>
	    				<a href="?page={{ page_number }}">{{ page_number }}</a>
					</li>
				{% endfor %}
				{% if page_obj.has_next %}
				    <li>
				        <a href="?page={{ page_obj.next_page_number }}"><span>>></span></a>
				    </li>
				{% endif %}
			</ul>
		</nav>
	</div>
{% endblock %}
