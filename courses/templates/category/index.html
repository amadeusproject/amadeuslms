{% extends 'base.html' %}

{% load static i18n %}
{% load static i18n permission_tags %}
{% load widget_tweaks %}

{% block breadcrumbs %}
	<ol class="breadcrumb">
	  	<li><a href="{% url 'app:index' %}">{% trans 'Home' %}</a></li>
	  	<li class="active">{% trans 'Manage Categories' %}</li>
	</ol>
{% endblock %}

{% block sidebar %}
	<div class="panel panel-primary navigation">
        <div class="panel-heading">
            <h5>{% trans 'Menu' %}</h5>
        </div>
        <div class="panel-body">
            <ul class="nav nav-pills nav-stacked">
                <li><a href="{% url 'users:profile' %}">{% trans 'Profile' %}</a></li>
                <li><a href="{% url 'course:manage' %}">{% trans 'My Courses' %}</a></li>
            </ul>
        </div>
    </div>

	{% if user|has_role:'professor' or user|has_role:'system_admin' %}

    <div class="panel panel-primary navigation">
	    <div class="panel-heading">
	        <h3 class="panel-title">Actions</h3>
	    </div>
	    <div class="panel-body">
	        <ul class="nav nav-pills nav-stacked">
	            <li><a href="javascript:void(0)">Replicate Course</a></li>
	            <li><a href="{% url 'course:create' %}">Create Course</a></li>
	            <li><a href="{% url 'course:create_cat' %}">Create Category</a></li>
	        </ul>
	    </div>
	</div>

	<div class="panel panel-primary navigation">
	    <div class="panel-heading">
	        <h3 class="panel-title">Category</h3>
	    </div>
	    <div class="panel-body">
	        <ul class="nav nav-pills nav-stacked">
	            <li><a href="{% url 'course:create_cat' %}">Create Category</a></li>
	            <li><a href="{% url 'course:manage_cat' %}">List Category</a></li>
	        </ul>
	    </div>
	</div>
{% endif %}
{% endblock %}

{% block content %}
	{% if messages %}
		{% for message in messages %}
			<div class="alert alert-success alert-dismissible" role="alert">
				<button type="button" class="close" data-dismiss="alert" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
				<p>{{ message }}</p>
			</div>
		{% endfor %}
	{% endif %}
	<div class="table-responsive">
		<table class="table table-striped">
			<thead>
				<tr>
					<th>{% trans 'Name' %}</th>
					<th>{% trans 'Slug' %}</th>
					<th class="text-center">{% trans 'Actions' %}</th>
				</tr>
			</thead>
			<tbody>
				{% if categories|length > 0 %}
					{% for category in categories %}
						<tr>
							<td>{{ category }}</td>
							<td>{{ category.slug }}</td>
							<td class="text-center">
								<a href="{% url 'course:view_cat' category.slug %}" class="btn btn-info btn-sm"><span class="glyphicon glyphicon-eye-open"></span></a>
								<a href="{% url 'course:update_cat' category.slug %}" class="btn btn-primary btn-sm"><span class="glyphicon glyphicon-edit"></span></a>
								<a href="javascript:modal.get('{% url 'course:delete_cat' category.slug %}','#category','#modal_category');" class="btn btn-danger btn-sm"><span class="glyphicon glyphicon-trash"></span></a>

							</td>
						</tr>
					{% endfor %}
				{% else %}
					<tr>
						<td colspan="3">
							{% trans 'No categories found' %}
						</td>
					</tr>
				{% endif %}
			</tbody>
		</table>
	</div>
	<div class="row" id="modal_category">
<script src="{% static 'js/modal_category.js' %}"></script>
{% endblock %}