{% load static i18n list_topic_foruns permission_tags widget_tweaks professor_access list_topic_exercises %}
<!-- Block with Log info -->
<input type="hidden" class="log_id" value="{{ topic_log_id }}" />
<input type="hidden" class="log_url" value="{% url 'course:topic_log' topic.id %}" />
<input type="hidden" class="loaded" value="true" />
<!-- Endblock -->
<p>
  <i>
    {{topic.description|safe}}
  </i>
</p>
<div class="row">
  <div class="col-xs-6 col-md-6">
    <div class="resource_inline">
      <h4>{% trans 'Material' %}</h4>
    </div>
    {% professor_subject topic.subject user as dropdown_topic %}
    {% if dropdown_topic %}
    <div class="resource_inline">

      {# dropdown de create material #}
      <div class="dropdown">
        <a href="#" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-plus-circle fa-lg" aria-hidden="true"></i></a>
        <ul class="dropdown-menu" aria-labelledby="dLabel">
          <li><a href="javascript:modal.get('{% url 'course:links:create_link' topic.slug %}', '#createLinksModal','#requisicoes_ajax')  ">{% trans 'Create a Link' %}</a></li>
          <li><a href="javascript:modal.get('{% url 'course:file:create_file' topic.slug %}', '#fileModal', '#requisicoes_ajax')">{% trans "Create a file" %}</a></li>
        </ul>
      </div>
    </div>
    {% endif %}
      {# materiais do tópico no modo de visualização #}
      <ul>
        {% list_topic_file request topic %}
        {% list_topic_link request topic%}
      </ul>
  </div>

  {% if user.is_authenticated %}
  {# avaliações do topico #}
  <div class="col-xs-6 col-md-6">
    <div class="resource_inline">
      <h4>{% trans 'Activities' %}</h4>
    </div>
    {% professor_subject topic.subject user as dropdown_topic %}
    {% if dropdown_topic %}
      <div class="resource_inline">

      {# dropdown de avaliações #}
      <div class="dropdown">
        <a href="#" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-plus-circle fa-lg" aria-hidden="true"></i></a>
        <ul class="dropdown-menu" aria-labelledby="dLabel">
          <li><a href="javascript:createForum('{% url 'course:forum:create' %}', '{{ topic.id }}')">{% trans 'Create Forum' %}</a></li>
          <li><a href="javascript:modal.get('{% url 'course:poll:create_poll' topic.slug%}','#poll','#requisicoes_ajax');">{% trans 'Create Poll' %}</a></li>
          <li><a href="javascript:modal.get('{% url 'course:exercise:create_exercise' topic.slug %}', '#createExercisesModal','#requisicoes_ajax')">{% trans 'Delivery Material' %}</a></li>
          <li><a href="{% url 'course:exam:create_exam' topic.slug %}">{% trans 'Create exam' %}</a></li>
        </ul>
      </div>
    </div>
    {% endif %}
      {# avaliações do tópico no modo de visualização #}
      <ul>
        {% list_topic_poll request topic %}
        {% list_topic_foruns request topic %}
        {% list_topic_exercise request topic %}
      </ul>
  </div>
  {% endif %}
</div>
